<!DOCTYPE html>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>To Do List Workshop</title>
<style>
body{
    font-family: Arial, Helvetica, sans-serif;
}
h2{
    text-align:center;
}
#header{
    display: flex;
    flex-direction: row;
    width:50vw;
    margin-left:25vw;
}
input {
    flex-grow:2;
    padding: 0 10px;
}
#addBtn {
  padding: 10px;
  cursor: pointer;
}
#myList{
    display: flex;
    flex-direction: column;
    width:50vw;
    margin-left:25vw;
    padding-left:0px;
}
li{
    background-color:#eeeeee;
    padding:10px;
    list-style-type: none;
    cursor: pointer;
}
/* Set all odd list items to a different color (zebra-stripes) */
li:nth-child(odd) {
  background-color: #e4e4e4;
}
li:hover {
  background: #cecece;
}
li.checked {
  text-decoration: line-through;
  background: #888;
  color: #666;
}
.close{
    float: right;
    cursor: pointer;
}

</style>
<body>
<h2>My To Do List</h2>
<div id="header">
    <input type="text" id="listInput" placeholder="To Do...">
    <button onclick="newList()" id="addBtn">Add</button>
</div>

<ul id="myList"></ul>

</body>
<!-- https://jquery.com/download/ -->
<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  crossorigin="anonymous"></script>
<!-- <script src="js/jquery-3.6.0.min.js"></script> -->

<script>
  /* 
  1. when 'add' button is clicked, run newList() function
  2. add a <li> element with whatever is inside the text input
  3. create a close button with the li element
  4. toggle a 'checked' class to strike-through element when checked

*/

function newList(){
  const inputValue = $("#listInput").val();
  if(inputValue === ''){
    alert('nothing there');
  }else{
    const li = $("<li></li>")
    const liId = 'list-'+inputValue;
    $("#myList").append(li.text(inputValue).attr('id', liId));
    localStorage.setItem(liId, inputValue);

    li.append($("<span>").addClass('close').append(document.createTextNode('\u2716')));
    $("#listInput").val('');
  }
}

$(document).on("click", '.close', function() {
  $(this).parent().css('display','none');
  const thisId = $(this).parent().attr('id');
  localStorage.removeItem(thisId);
});

function fillList(){
  $.each(localStorage, function(key, value){

    const id = key;
    const inputValue = value;

    $("#myList")
      .append($("<li></li>")
        .text(inputValue)
        .attr('id', 'list-'+inputValue)
        .append($("<span>")
          .addClass('close')
          .append(document
            .createTextNode('\u2716'))));
  });
}

$(document).on("click", 'li', function() {
  $(this).toggleClass('checked');
});

$('#listInput').on('keypress',function(e) {
    if(e.which == 13) {
      newList();
    }
});
$(document).ready(function() {
  fillList();
})

// $(document).on("click", '.close', function() {
//   $(this).parent().css('display','none');
//   const thisId = $(this).parent().attr('id');
//   localStorage.removeItem(thisId);
// }).on("click", 'li', function() {
//   $(this).toggleClass('checked');
// }).ready(function() {
//   fillList();
// });

</script>